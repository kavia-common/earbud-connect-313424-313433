{"is_source_file": true, "format": "Kotlin", "description": "This file implements Bluetooth connectivity functionalities for an Android application, including scanning, connecting, disconnecting, and Bluetooth GATT operations, with a focus on BLE and classic Bluetooth device management.", "external_files": ["android.annotation.SuppressLint", "android.bluetooth.BluetoothAdapter", "android.bluetooth.BluetoothDevice", "android.bluetooth.BluetoothGatt", "android.bluetooth.BluetoothGattCallback", "android.bluetooth.BluetoothGattCharacteristic", "android.bluetooth.BluetoothGattService", "android.bluetooth.BluetoothManager", "android.bluetooth.BluetoothProfile", "android.Manifest", "android.bluetooth.le.ScanCallback", "android.bluetooth.le.ScanResult", "android.content.BroadcastReceiver", "android.content.Context", "android.content.Intent", "android.content.IntentFilter", "android.content.pm.PackageManager", "android.os.Build", "androidx.core.content.ContextCompat", "kotlinx.coroutines.CoroutineScope", "kotlinx.coroutines.Dispatchers", "kotlinx.coroutines.SupervisorJob", "kotlinx.coroutines.flow.MutableStateFlow", "kotlinx.coroutines.flow.StateFlow", "kotlinx.coroutines.flow.update", "org.example.app.model.ConnectionState", "org.example.app.model.DeviceStatus", "org.example.app.model.DeviceSummary", "java.util.UUID"], "external_methods": ["context.getSystemService", "scanner.startScan", "scanner.stopScan", "device.createBond", "adapter.getRemoteDevice", "BluetoothDevice.connectGatt", "gatt.discoverServices", "gatt.getService", "gatt.readCharacteristic", "device.bondState", "intent.getParcelableExtra", "device.name", "device.address", "gatt.disconnect", "gatt.close", "ContextCompat.checkSelfPermission"], "published": ["status", "scanResults"], "classes": [{"name": "AndroidBluetoothPlatform", "description": "A class managing Bluetooth operations including scanning, connecting, and GATT interactions for Android devices."}], "methods": [{"name": "startScan", "description": "Starts BLE and classic Bluetooth device discovery, updating internal state and managing permissions."}, {"name": "stopScan", "description": "Stops ongoing BLE and classic Bluetooth discovery processes."}, {"name": "connect", "description": "Initiates connection to a specified Bluetooth device, handling both BLE and classic devices."}, {"name": "disconnect", "description": "Disconnects current Bluetooth GATT connection and updates connection status."}, {"name": "reconnectLast", "description": "Reconnects to the last device connected, if any."}, {"name": "shutdown", "description": "Stops all scanning and disconnects, effectively shutting down Bluetooth operations."}], "calls": ["btAdapter?.bluetoothLeScanner?.startScan", "adapter.startDiscovery", "device.createBond", "device.connectGatt", "gatt?.discoverServices", "gatt?.getService", "gatt?.readCharacteristic", "ContextCompat.checkSelfPermission"], "search-terms": ["AndroidBluetoothPlatform", "BLE scan callback", "Gatt connection", "DeviceSummary", "BluetoothAdapter", "BluetoothGatt", "BluetoothManager", "connectGatt", "scanResults", "disconnectGatt"], "state": 2, "file_id": 12, "knowledge_revision": 67, "git_revision": "", "revision_history": [{"44": ""}, {"67": ""}], "hash": "72722b55ee3aa197aad55743132b23a9", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/bluetooth/AndroidBluetoothPlatform.kt"}