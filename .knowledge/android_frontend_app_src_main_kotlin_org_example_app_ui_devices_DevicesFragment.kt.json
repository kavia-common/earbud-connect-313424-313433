{"is_source_file": true, "format": "Kotlin", "description": "This file defines the DevicesFragment class, a UI component in an Android application responsible for managing device discovery, permissions, and interaction within the device list view. It utilizes ViewModels for data handling, manages permissions for Bluetooth, and includes UI logic such as scanning, stopping scans, and updating the view based on the app state.", "external_files": ["org.example.app.R", "org.example.app.permissions.PermissionHelper", "org.example.app.repo.AppRepository", "org.example.app.ui.shared.collectWithLifecycle", "org.example.app.vm.AppViewModelFactory", "org.example.app.vm.DevicesViewModel", "org.example.app.vm.SettingsViewModel", "androidx.activity.result.contract.ActivityResultContracts", "androidx.core.content.ContextCompat", "androidx.fragment.app.Fragment", "androidx.recyclerview.widget.LinearLayoutManager", "androidx.recyclerview.widget.RecyclerView", "android.view.LayoutInflater", "android.view.View", "android.view.ViewGroup", "android.widget.Button", "android.widget.LinearLayout", "android.widget.TextView"], "external_methods": ["PermissionHelper.hasBluetoothPermissions", "PermissionHelper.requiredBluetoothPermissions", "getRepo"], "published": ["DevicesFragment"], "classes": [{"name": "DevicesFragment", "description": "An Android Fragment managing Bluetooth device scanning, permissions, and user interactions within the device list UI."}], "methods": [{"name": "onCreateView", "description": "Inflates the fragment's layout from XML."}, {"name": "onViewCreated", "description": "Initializes UI components, sets up adapters and click listeners, and observes ViewModel data streams."}, {"name": "refreshPermissionUi", "description": "Shows or hides permission request UI based on current app state."}, {"name": "requestBluetoothPermissions", "description": "Requests Bluetooth-related permissions from the user."}, {"name": "getRepo", "description": "Retrieves the AppRepository instance from the MainActivity."}], "calls": ["PermissionHelper.hasBluetoothPermissions", "PermissionHelper.requiredBluetoothPermissions", "ContextCompat.checkSelfPermission", "permissionLauncher.launch", "devicesViewModel.connect", "devicesViewModel.startScan", "devicesViewModel.stopScan", "settingsViewModel.settings.value.demoModeEnabled", "settingsViewModel.settings.collectWithLifecycle", "adapter.submit", "collectWithLifecycle"], "search-terms": ["DevicesFragment", "Bluetooth permissions", "device scanning", "Android Fragment", "ViewModel", "RecyclerView adapter", "permission handling", "device list"], "state": 2, "file_id": 21, "knowledge_revision": 64, "git_revision": "", "revision_history": [{"53": ""}, {"64": ""}], "hash": "d5d0aaa65d6ef5cf84c3da74450008cb", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/ui/devices/DevicesFragment.kt"}