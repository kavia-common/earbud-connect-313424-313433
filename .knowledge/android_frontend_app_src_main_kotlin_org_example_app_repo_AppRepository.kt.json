{"is_source_file": true, "format": "Kotlin", "description": "This file defines the AppRepository class, which manages Bluetooth platform interactions and user preferences for an Android app. It handles device scanning, connection management, and settings retrieval, encapsulating logic for platform selection and device reconnection.", "external_files": ["kotlinx.coroutines.flow.StateFlow", "org.example.app.bluetooth.AndroidBluetoothPlatform", "org.example.app.bluetooth.BluetoothPlatform", "org.example.app.bluetooth.DemoBluetoothPlatform", "org.example.app.data.AppPreferences", "org.example.app.model.DeviceStatus", "org.example.app.model.DeviceSummary", "org.example.app.model.UserSettings"], "external_methods": ["prefs.getSettings", "prefs.setSettings", "prefs.getLastDevice", "prefs.setLastDevice", "platform.status", "platform.scanResults", "platform.reconnectLast", "platform.startScan", "platform.stopScan", "platform.connect", "platform.disconnect", "platform.shutdown"], "published": ["status", "scanResults", "getSettings", "setSettings", "getLastDevice", "setLastDevice", "bootstrap", "startScan", "stopScan", "connect", "disconnect", "shutdown"], "classes": [{"name": "AppRepository", "description": "Repository class managing Bluetooth device operations and user preferences with platform selection based on user settings."}], "methods": [{"name": "getSettings", "description": "Retrieves user settings from preferences."}, {"name": "setSettings", "description": "Stores user settings into preferences."}, {"name": "getLastDevice", "description": "Retrieves the last connected device summary."}, {"name": "setLastDevice", "description": "Stores the last connected device summary."}, {"name": "bootstrap", "description": "Initializes platform based on user settings and attempts auto-reconnection."}, {"name": "startScan", "description": "Starts Bluetooth device scanning."}, {"name": "stopScan", "description": "Stops Bluetooth device scanning."}, {"name": "connect", "description": "Connects to a specified device and updates last device in preferences."}, {"name": "disconnect", "description": "Disconnects from the current device."}, {"name": "shutdown", "description": "Shuts down the platform."}], "calls": ["prefs.getSettings", "prefs.setSettings", "prefs.getLastDevice", "prefs.setLastDevice", "platform.reconnectLast", "platform.startScan", "platform.stopScan", "platform.connect", "platform.disconnect", "platform.shutdown"], "search-terms": ["AppRepository", "BluetoothPlatform", "device management", "platform selection", "auto reconnect", "preferences", "scan control", "connection handling"], "state": 2, "file_id": 14, "knowledge_revision": 46, "git_revision": "", "hash": "cd4aa6767ffc37837f12fd6134e3e6df", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/repo/AppRepository.kt", "revision_history": [{"46": ""}]}